<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">
<?rfc toc="yes"?>
<?rfc tocompact="yes"?>
<?rfc tocdepth="2"?>
<?rfc tocindent="yes"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes"?>
<?rfc comments="yes"?>
<?rfc inline="yes"?>
<?rfc compact="yes"?>
<?rfc subcompact="no"?>
<rfc category="std"
     docName="draft-ahuang-ippm-dex-timestamp-ext-00"
     ipr="trust200902">
  <front>
    <title abbrev="Timestamp extension IOAM DEX">Timestamp extension flag
    for In Situ Operations, Administration, and Maintenance (IOAM) Direct Export</title>

    <author fullname="Thomas Graf" initials="T" surname="Graf">
      <organization>Swisscom</organization>

      <address>
        <postal>
          <street>Binzring 17</street>

          <city>Zurich</city>

          <code>8045</code>

          <country>Switzerland</country>
        </postal>

        <email>thomas.graf@swisscom.com</email>
      </address>
    </author>

    <author fullname="Benoit Claise" initials="B" surname="Claise">
      <organization>Huawei</organization>

      <address>
        <email>benoit.claise@huawei.com</email>
      </address>
    </author>

    <author fullname="Alex Huang Feng" initials="A." surname="Huang Feng">
      <organization>INSA-Lyon</organization>

      <address>
        <postal>
          <street/>

          <city>Lyon</city>

          <region/>

          <code/>

          <country>France</country>
        </postal>

        <phone/>

        <facsimile/>

        <email>alex.huang-feng@insa-lyon.fr</email>

        <uri/>
      </address>
    </author>

    <author fullname="Pierre Francois" initials="P." surname="Francois">
      <organization>INSA-Lyon</organization>

      <address>
        <postal>
          <street/>

          <city>Lyon</city>

          <region/>

          <code/>

          <country>France</country>
        </postal>

        <phone/>

        <facsimile/>

        <email>pierre.francois@insa-lyon.fr</email>

        <uri/>
      </address>
    </author>

    <date day="19" month="January" year="2023"/>

    <abstract>
      <t>This document defines new extension flags for the In Situ Operations,
      Administration, and Maintenance (IOAM) Direct Export option type. The new flags
      allow IOAM DEX Option-type to add a timestamp into the header.</t>
    </abstract>

    <note title="Requirements Language">
      <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
      "OPTIONAL" in this document are to be interpreted as described in BCP 14
      <xref target="RFC2119"/> <xref target="RFC8174"/> when, and only when,
      they appear in all capitals, as shown here.</t>
    </note>
  </front>

  <middle>
    <section anchor="introduction" title="Introduction">
      <t>Network operators require delay monitoring accros their network, notably when some services
           undergo long end-to-end delays. Nodes can use IOAM <xref target="RFC9197"/> in order to report this delay to a
      collector.</t>

      <t>In order to support delay monitoring in passport mode so as to leverage aggregation; 
           IOAM Direct Export Option-type (DEX) <xref target="RFC9326"/> needs to be extended to 
           accomodate delay monitoring. </t>
      
      <t>This document defines two new Extension flags for IOAM DEX Option-type 
      <xref target="RFC9326"/> to be able to add a timestamp in the header.</t>

    </section>

    <section anchor="terminology" title="Terminology">
         <t>This section should be removed</t>
      <t>Abbreviations used in this document:</t>

      <dl>
        <dt>IOAM:</dt>
        <dd>In Situ Operations, Administration, and Maintenance <xref target="RFC9197"/></dd>
      </dl>

      <dl>
        <dt>DEX:</dt>
        <dd>Direct Exporting <xref target="RFC9326"/></dd>
      </dl>
    </section>

    <section anchor="solution_overview" title="Solution overview">
      <t>The IOAM DEX Option-type format is defined in <xref target="RFC9326">Section 3.2</xref>.
      To be able to mesure the delay between the encapsulation node and the current node,
      we suggest to add a timestamp to the IOAM DEX option-type as illustrated in 
           figure <xref target="fig_ups_header"/>
      </t>
         
         
      <t>This document proposes two optional fields to be included in the IOAM DEX option type format that can be enabled 
      using IOAM DEX Extension-Flags (Using currently unassigned flags 2 and 3).</t>

      <figure anchor="fig_ups_header" title="IOAM DEX option type Format including timestamp">
        <artwork align="center"><![CDATA[
0                   1                   2                   3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Namespace-ID           |     Flags     |Extension-Flags|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|               IOAM-Trace-Type                 |   Reserved    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Flow ID (Optional)                    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                     Sequence Number  (Optional)               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                   Timestamp Seconds  (Optional)               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                  Timestamp Fraction  (Optional)               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
      </figure>

    </section>

    <section anchor="timestamp_format" title="Timestamp formats">
         <t>We refer to use the format of TODO REF to encode the Timestamp Seconds and Timestamp Fraction fields</t>
    </section>

    <section anchor="export" title="Export method">
      <t>A way to perform data export of monitored delay using the method described in this document
           is proposed in TODO IPFIX IE draft.</t>
    </section>

    <section anchor="security" title="Security Considerations">
      <t>The security considerations for the IOAM DEX Option-type
      are described in <xref target="RFC9326"/>. This documents adds
      no additional security considerations.</t>
    </section>

    <section anchor="IANA_Considerations" title="IANA Considerations">
         <t>IANA would be required to reserve flags 2 and 3 from the IOAM DEX Extension Flags registry.</t>
    </section>

    <section anchor="acknowledgements" title="Acknowledgements">
      <t>The authors would like to thank xxx for their review and valuable
      comments.</t>
    </section>
  </middle>

  <back>
    <references title="Normative References">
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.8174.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.9197.xml"?>
      <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.9326.xml"?>
    </references>

    <references title="Informative References">
    </references>
  </back>
</rfc>
